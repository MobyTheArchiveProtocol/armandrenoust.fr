---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getEntry } from 'astro:content';

// 1. On récupère les données
const aproposData = await getEntry('pages', 'apropos');
const { title, intro, image } = aproposData.data;

// 2. On prépare le contenu "Riche" (le corps du texte) pour l'affichage
const { Content } = await aproposData.render();
---

<BaseLayout title="À Propos">
    <h1>{title}</h1>

    <div class="content-wrapper">
        <div class="text-content">
            <p class="intro">{intro}</p>
            
            <div class="bio-text">
                <Content />
            </div>
        </div>

        <div class="image-content">
            {image && (
                <img src={image} alt="Photo de profil" />
            )}
        </div>
    </div>

</BaseLayout>

<style>
    h1 {
        text-align: center;
        margin-bottom: 3rem;
    }

    .content-wrapper {
        display: grid;
        grid-template-columns: 2fr 1fr; 
        gap: 2.5rem;
        align-items: start;
    }

    .intro {
        font-size: 1.2rem;
        font-weight: 600;
        color: #333;
        margin-bottom: 1.5rem;
    }

    /* On stylise le Markdown généré (le <Content />) */
    .bio-text :global(p) {
        line-height: 1.7;
        margin-bottom: 1rem;
    }
    .bio-text :global(strong) {
        font-weight: 700;
        color: #007bff; /* Exemple : mettre le gras en bleu */
    }

    .image-content img {
        width: 100%;
        height: auto;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0, 0.1);
    }

    @media (max-width: 768px) {
        .content-wrapper {
            grid-template-columns: 1fr;
        }
        .image-content {
            order: -1; 
            margin-bottom: 2rem;
        }
    }
</style>